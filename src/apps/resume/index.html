<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>My Resume in ReactJS</title>

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">

    <script type="text/javascript" src="https://gc.kis.scr.kaspersky-labs.com/1B74BD89-2A22-4B93-B451-1C9E1052A0EC/main.js" charset="UTF-8"></script><script src="lib/react.js"></script>
    <script src="lib/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  </head>


<body>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
  <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
  <link rel="stylesheet" type="text/css" href="resume_DM.css">
  
  <div class="navbar">
    <nav>
      <div class="nav-wrapper blue-grey" id="SPpark-nav">
        <!-- the href refreshes the page, but its all daynamic so its only for the user -->
          <a href="index.html" class="brand-logo center">R&#233;sum&#233;</a>
            <ul class="right hide-on-small-and-down">
              <li><a href="/">Home</a></li>
              <li><a href="subscribe.html">Subscribe</a></li>
              <li><a href="cities.html">Cities</a></li>
            </ul>
      </div>
    </nav>
  </div>

  <body>
    <div class="container">
      <div id="navbar"></div>

      <h2 id="about-heading">About Me</h2>
      <div class="col s12 m8 offset-m2 l6 offset-l3">
        <div class="card-panel grey lighten-3 z-depth-1">
          <div class="row valign-wrapper">
            <div class="col s2">
              <img src="img/me.jpg" alt="" class="responsive-img"> <!-- notice the "circle" class -->
            </div>
            <div class="col s10" id="about">
            </div>
          </div>
        </div>
      </div>

      <h2 id="skills-heading">Skills</h2>
      <div class="card-panel grey lighten-3">
        <div id="skills"></div>
      </div>

      <h2 id="tasks-heading">Tasks</h2>
      <div class="card-panel grey lighten-3">
        <div id="tasks"></div>
      </div>

      <h2 id="cities-heading">Favorite Cities</h2>
      <div class="card-panel grey lighten-3">
        <div id="cities"></div>
      </div>
    </div>
    
    <script>
      // MyComponents is a global object where each property is a reference to a component class
      MyComponents = {}

    </script>

    <!-- import each component class in components/ -->

    <script type="text/babel" src="components/navbar.js"></script>

    <script type="text/babel" src="components/about.js"></script>
    <script type="text/babel" src="components/task-list.js"></script>
    <script type="text/babel" src="components/city-list.js"></script>
    <script type="text/babel" src="components/skill-list.js"></script>

    <!-- render react components -->
    <script type="text/babel">
      var refWeather = new Firebase('https://publicdata-weather.firebaseio.com');

      ReactDOM.render(
        <MyComponents.NavBar/>,
        $('#navbar').get(0)
      );

      ReactDOM.render(
        <MyComponents.About/>,
        $('#about').get(0)
      );

      // TODO: load tasks data from Firebase
      ref.child('todo-list/tasks').orderByValue().on('value', function(snapshot) {
          var tasksDB = snapshot.val()
          $('#tasks').empty()
          for( var key in tasksDB){ 
            var curTask = tasksDB[key];
            if (curTask.assigned == "Boraz")
            {tasks.push(curTask)}
          }
          ReactDOM.render(
            <MyComponents.TaskList tasks={tasks}/>,
            $('#tasks').get(0)
          );
        })

      refWeather.on('value', function(snapshot){
        var citiesDB = snapshot.val()
        var cities = []
        for(var key in citiesDB){ 
          if (key == "chicago" || key == "denver" || key == "phoenix" || key == "sanfrancisco" || key == "seattle")
          {var curCity = citiesDB[key]
          curCity.name = key
          cities.push(curCity)}
          }
        ReactDOM.render(
          <MyComponents.CityList cities={cities}/>,
          $('#cities').get(0)
        );
      })

      // TODO: load skill data from Firebase
      ref.child('bio/skills').once('value', function(snapshot){
        var skills = snapshot.val()

      ReactDOM.render(
        <MyComponents.SkillList skills={skills}/>,
        $('#skills').get(0)
      );

    </script>
    <script>
  // create a firebase reference to the root
  var ref = new Firebase('https://ucdd-4830-004.firebaseio.com/')

		  ref.child('bio/about').once('value', function(snapshot){
  var about = snapshot.val()
      about.forEach(function(about){
      $('#about').append('<li class="collection-item">' + about + '</li>')
        })
        })

      ref.child('bio/skills').once('value', function(snapshot){
  var skills = snapshot.val()
      skills.forEach(function(skills){
      $('#skills').append('<li class="collection-item">' + skills + '</li>')
        })
        })

    </script>
    <script>
	//Button classes are clear and done
  // create a firebase reference to the root
  var ref = new Firebase('https://todofirebaseteamkeymasters.firebaseio.com/')
  // read data from the location bio/tasks, only once
      ref.child('todo-list/tasks').orderByValue().on('value', function(snapshot) {
  var tasks = snapshot
      document.getElementById("tasks").innerHTML = "";
      snapshot.forEach(function(snapshot) {
        tasks = snapshot.val()
        completed = tasks.completed
        key = snapshot.key()
        console.log(completed)
        console.log(key)
		if (tasks.assignment === "Boraz") {
      $('#tasks').append('<li class="task-entry">' + tasks.title + ':' + '<li class="task-entry-details">' + 'Due: ' + tasks.due + '</li>' + '<li class="task-entry-details">' + 'Priority: ' + tasks.priority + '</li>' + '<li class="task-entry-details">' + 'Completed: ' + tasks.completed + '</li><br>')
            }
            })
    })

    </script>
  </body>
</html>